(function(){var a={encodeReg:function(a){return a.replace(/([^\w\d\s])/gi,"\\$1")},trim:function(a){return(""+a).replace(/^(\s+|\s+)$/,"")},trimFromSquareBrackets:function(a){return a=a.replace(/\[\s+/g,"["),a=a.replace(/\s+\]/g,"]"),a},convertMultipleToSingleWhitespace:function(a){return a.replace(/ {2,}/g," ")},getRegexParenthesisNumber1:function(a,b,c,d,e){var f=c+"("+d+")"+e;if(a.search(RegExp(f))===-1)return null;var g=b,h="0102030405060708091011121314151617181920",i=function(a){return a=a<10?"0"+a:a,"\\s*"+g+"[^"+g+"]*"+a},j=1;d=d.replace(/\|/g,function(){var a=i(j)+"|";return j=j+1,a}),d=d+i(j),a=a.replace(RegExp("("+e+")"),g+h+g+"$1");var k=c+"("+d+")[^"+g+"]*"+g+e,l=RegExp(k),m=l.exec(a);if(m){var n=""+m[1],o=n.substr(n.length-2),p=parseInt(o)-1;return{intP:p,strMatch:n}}return null}},b=function(){this.strUsedMarkers="",this.objM={},this.strAvailableMarkers="~\u00ac\u2020\u2021\u2030\u00ac\u00bf\u00de~`\u00fc\u00a4\u00b1\u00c6\u00b8\u00b3\u00bf\u00b2\u00ba\u00ff";if(arguments.length>0){var a=arguments[0],b=arguments[1];this.addMarkers(a,b)}};b.prototype={addMarkers:function(a,b){var c=this.strAvailableMarkers,d=this.objM,e=this.strUsedMarkers,f=b.split(","),g=f.length,h=0,i;while(c!==""){i=c.substring(0,1);if(a.indexOf(i)==-1){d[f.pop()]=i,e+=i,++h;if(h===g){c=c.substr(1);break}}c=c.substr(1)}return h<g?(trace("Apparently all of the above markers have been used : "+c),null):(this.strUsedMarkers=e,this.strAvailableMarkers=c,d)},clearRegMarkers:function(a){var b=this.strUsedMarkers;return a=a.replace(RegExp("["+b+"](\\d+ )?","g"),""),a}};var c=function(){this.arrMasksMultiple=[],this.arrMasksSingle=[],this.strMarker=null,this.strMarkerMaskName="strMarkerMask"};c.prototype={init:function(a){this.objMarkers=a},mask:function(a){var b="<!--";a.indexOf(b)!==-1&&(a=this.maskEach(a,"COMMENTS",b,"-->",!1)),b="<![CDATA[",a.indexOf(b)!==-1&&(a=this.maskEach(a,"CDATAS",b,"]]>",!1)),b="<script",a.indexOf(b)!==-1&&(a=this.maskEach(a,"SCRIPTS",b+"[^>]*>","</script>",!0)),b="<style",a.indexOf(b)!==-1&&(a=this.maskEach(a,"STYLES",b+"[^>]*>","</style>",!0));var c=[],d,e,f;return b="<?xml",a.indexOf(b)!==-1&&(d=/<\?xml[^>]*\?>/,e="strReplaceXmlDec",f=""+a.match(d),a=a.replace(d,e),c.push([f,e])),b="<!DOCTYPE",a.indexOf(b)!==-1&&(d=/<!DOCTYPE[^>]*>/,e="strReplaceDocType",f=""+a.match(d),a=a.replace(d,e),c.push([f,e])),this.arrMasksSingle=c,a},maskEach:function(b,c,d,e,f){var g=this.strMarker;if(!g){var h=this.strMarkerMaskName,i=this.objMarkers.addMarkers(b,h);g=i[h],this.strMarker=g}var j=[];b=b.replace(RegExp("("+e+")","g"),"$1"+g);var k=f?d:a.encodeReg(d),l=f?e:a.encodeReg(e),m=f?"("+k+")":"()"+k,n=f?"("+l+")":"()"+l,o=m+"([^"+g+"]*)"+n+g,p=RegExp(o,"g"),q,r="";return b=b.replace(p,function(a,b,d,e){q=c+"["+j.length+"]",j.push(d);var f=b+q+r+g+e;return f}),this.arrMasksMultiple.push([j,RegExp(c+"\\[(\\d+)\\][^"+g+"]*"+g,"g"),[f,d,e]]),b},unmask:function(a){var b=this.arrMasksMultiple,c=this.arrMasksSingle,d,e,f;for(d=b.length-1;d>-1;--d){var g=b[d][2],h=g[0],i=h?"":g[1],j=h?"":g[2];e=b[d][1],f=b[d][0];while(a.search(e)!==-1)a=a.replace(e,function(a,b){return i+f[parseInt(b,10)]+j})}var k,l,m;for(d=c.length-1;d>-1;--d)k=c[d][0],l=c[d][1],m=RegExp(l),a=a.replace(m,k);return a}};var d=function(){var a=arguments.length>0?arguments[0]:"";return new e(a)},e=function(d){this.v="alpha 0.92",this.dateStamp="2011-09-01_2000",this.supported='[attr="value"], bind',this.objMarkers=new b,this.objMasks=new c,d!=""&&(d=a.trim(d),this.initMarkers(d),this.strHTML=this.wrapTagPointers(d))};e.prototype={shared:{intLastWrappedPointer:0,data:{}},dataArrayTrigger:function(a,b){var c=this.shared.data[a][b].arr;for(var d=0,e=c.length;d<e;++d)c[d]()},initMarkers:function(a){var b=this.objMarkers,c=b.addMarkers(a,"strMarkerHandle,strMarkerStart,strMarkerEnd")},wrapTagPointers:function(a){if(a.search(/[<>]/)!==-1){var b=this.objMarkers,c=b.objM,d=c.strMarkerHandle,e=c.strMarkerStart,f=c.strMarkerEnd,g=this.objMasks;g.init(b),a=g.mask(a),a=a.replace(/(<\w+([\s\:][^>]*[^\/])?>)/g,e+"$1"),a=a.replace(/(<\/\w+([\s\:][^>]*)?>)/g,"$1"+f);var h=new RegExp("([^"+e+"]<[^/]([^>]*[^/]>)?>|</[^>]*>[^"+f+"])");if(a.search(h)!=-1){var i=h.exec(a),j=i.index,k=a.substring(0,j),l=k.split(/\n/),m=l.length,n=l[m-1].length;return trace("HTML not well formed. Tags not properly opened and closed:"),trace("intLineNumber ="+m),trace("intChar ="+n),trace("strGoodHTML="+k),trace("strBadHTML="+a.substr(j)),""}var o=this.shared,p=o.intLastWrappedPointer,q=RegExp(e+"(<[^\\/][^"+e+f+"]*[^\\/]>)"+f,"g"),r=function(){var a=arguments,b=d+p+" "+a[1]+(d+p+" ");return++p,b};while(a.search(q)!==-1)a=a.replace(q,r);a=a.replace(/(\<[^>]*\/>)/g,r),o.intLastWrappedPointer=p,a=g.unmask(a)}else trace("You have not supplied any html!");return a},replaceMarkers:function(a,b,c){return a.replace(RegExp(b+"(\\d+ )","g"),c+"$1")},removeTagPointers:function(a){var b=this.objMarkers.objM.strMarkerHandle;return a=a.replace(RegExp(b+"\\d+ ","g"),""),a=a.replace(RegExp(b,"g"),""),a},incrementTagPointers:function(a,b){var c=this.shared.intLastWrappedPointer;return a.replace(RegExp("("+b+"(\\d+) )([\\w\\W]*)\\1","g"),function(a,d,e,f){var g=b+c+" "+f+b+c+" ";return++c,g})},renewAndWrapTagPointers:function(a){var c=this.html(),d=new b(c+a,"strMarkerHandle,strMarkerStart,strMarkerEnd"),e=this.objMarkers.objM.strMarkerHandle,f=d.objM.strMarkerHandle;return this.strHTML=this.replaceMarkers(this.strHTML,e,f),this.objMarkers=d,a=this.wrapTagPointers(a),a},find:function(){var a=new f(this),b=arguments[0];return a.find(b)},html:function(){var a=this.strHTML;return a=this.objMarkers.clearRegMarkers(a),a},top:function(){var a=new f(this);return a.top()}};var f=function(a){this.objInst=a};f.prototype={arrPointers:[],objInst:{},objFindFn:{parseSelectors:function(b){return b=a.convertMultipleToSingleWhitespace(b),b=a.trimFromSquareBrackets(b),b},findAllCommas:function(a,b,c,d){var e=f.prototype,g,h=d.objMarkers.objM.strMarkerHandle;a=this.parseSelectors(a);var i=b;if(c.length){var j=c[0];i=e.extract(h,j,b)}var k=[i],l=a.split(","),m=[];for(var n=0,o=l.length;n<o;++n)g=this.findCollatedSpaced(l[n],k,h),m=m.concat(g);return m=m.reverse(),m},parseSelector:function(b){var c=/\[([^\]]*)\]/g,d=/([>\~\+])¤+/g;return b=a.trim(b),b.search(c)==-1&&b.search(d)==-1?b.split(" "):(b=b.replace(/ /g,"\u00a4"),b=b.replace(c,function(a,b){return"["+b.replace(/¤/g," ")+"]"}),b=b.replace(d,function(a,b){return b+" "}),b.split(/¤+/g))},regOr:function(a){return RegExp("(["+a+"])")},regNot:function(a){return RegExp("([^"+a+"])")},findCollatedSpaced:function(a,b,c){var d=this.parseSelector(a),e=b,g,h=f.prototype,i=null,j=/[^\#\.>\+\~\[\:]/;for(var k=0,l=d.length;k<l;++k){var m=d[k],n=this.extractStartChar(m,j);m=n!=="TAG"?m.substr(1):m;var o=[];g=[];for(var p=0,q=e.length;p<q;++p){var r=e[p],s=this.findMultipleSelectors(h,n,m,r,c,i);if(!s)return[];for(var t=0,u=s.length;t<u;++t){var v=s[t];h.selectors[v]=m;if(v==""||v==">")continue;o.push(h.extract(c,v,r))}g=g.concat(s)}e=o}return g},extractStartChar:function(a,b){var c=a.charAt(0);return c=c.replace(b,"TAG"),c},findMultipleSelectors:function(a,b,c,d,e,f){var g=this.extractFirstSelector(c),h=this.getPredicate(c),i=this.cropFirstSelector(b,g),j=this.selectorChoice[b].apply(this,[a,d,e,f,i,h]),k="";if(g!=""){var l=g.length;if(h===null&&b!="["&&b!=":"){var m=c.search(/[\#\.\:\[]/);l=m!=-1?m:c.length}k=c.substr(l)}if(k.length!=""&&j.length!==0){var n=k.charAt(0);k=n=="."||n=="#"?k.substr(1):k,j=this.findMultipleSelectors(a,n,k,d,e,j)}return j},extractFirstSelector:function(a){var b=a.search(/[\#\.\[\(]/),c=a.charAt(b);return c=="("?this.getMultipleParenthesis(a):c==="["?a.substring(0,a.indexOf("]")+1):b==-1?a:a.substring(0,b)},getMultipleParenthesis:function(a){var b=/([\(\)])/g,c,d=0,e=0;while(c=b.exec(a)){d=d+(c[1]=="(")?1:-1;if(d<1)break}return a.substring(0,b.lastIndex)},cropFirstSelector:function(a,b){if(a=="["||a==":")return b;var c=b.search(/[\:\[]/),d=c===-1?b.length:c;return b=b.substring(0,d)},getPredicate:function(a){a=this.cropForPredicate(a);var b="(\\[|\\:eq\\()(\\d+)(\\]|\\))",c=RegExp(b),d=c.exec(a);if(d){var e=parseInt(d[2]);return e}return null},cropForPredicate:function(a){var b=a.search(/[\.\#]/),c=b!==-1?b:a.length;return a.substring(0,c)},selectorChoice:{"#":function(a){return a.objFindFn.findId.apply(this,arguments)},".":function(a){return a.objFindFn.findClasses.apply(this,arguments)},":":function(a){return a.objFindFn.findColons.apply(this,arguments)},"[":function(a){return a.objFilterPredicate.filterPredicate.apply(a.objFilterPredicate,arguments)},">":function(a){return a.objFindFn.findImmediateChild.apply(this,arguments)},"+":function(a){return a.objFindFn.findBeforeNext.apply(this,arguments)},"~":function(a){return a.objFindFn.findAfterPrev.apply(this,arguments)},TAG:function(a){return a.objFindFn.findTags.apply(this,arguments)}},findId:function(a,b,c,d,e){var f=[];if(d!==null){var g='<[^>]*id="'+e+'"';g=this.regexAgainstPrefiltered(c,d,g),f=this.matchAgainstPreFiltered(b,c,g,null,d)}else{var h=b.indexOf('id="'+e+'"');if(h!=-1){var i=b.substring(0,h),j=i.lastIndexOf(c);i=i.substr(j);var k=i.substring(1,i.indexOf(" "));f.push(k)}}return f},findTags:function(a,b,c,d,e,f){var g="<"+e+"[\\s\\:\\/>]",h=[];return d!==null?h=this.matchAgainstPreFiltered(b,c,g,f,d):h=this.iterateEachPointer(b,c,g,f),h},findClasses:function(a,b,c,d,e,f){var g='<[^>]*class="?[^"]*["\\s]'+e+'["\\s]',h=[];return d!==null?h=this.matchAgainstPreFiltered(b,c,g,f,d):h=this.iterateEachPointer(b,c,g,f),h},iterateEachPointer:function(a,b,c,d){var e=[],f=RegExp(c,"g"),g=a.split(f);if(g[0].lastIndexOf(b)==-1)return[];if(d!==null){var h=g[d];if(h)return k=this.getIPointer(h,b),[k]}else for(var i=0,j=g.length-1;i<j;++i){var k=this.getIPointer(g[i],b);e.push(k)}return e},matchAgainstPreFiltered:function(a,b,c,d,e){var f=[],g=RegExp(b+"("+e.join("|")+") "+c,"g"),h,i=0;while(h=g.exec(a)){if(d){if(i===d)return f.push(h[1]),f}else f.push(h[1]);++i}return f},getIPointer:function(a,b){var c=a.lastIndexOf(b),d=a.substr(c),e=d.substring(1,d.indexOf(" "));return e}},objFilterPredicate:{filterPredicate:function(b,c,d,e,f){var g='\\w+|\\w+\\=\\"[^\\"]*\\"',h="filterHasAttr,filterAttrEquals",i=a.getRegexParenthesisNumber1(f,"\u00a4","\\[\\s*",g,"\\s*\\]");if(i){var j=i.intP,k=i.strMatch,l=h.split(","),m=l[j];return this[m].apply(this,arguments)}return null},filterHasAttr:function(a,b,c,d,e){return[]},filterAttrEquals:function(a,b,c,d,e){var f='(\\w+)\\=\\"([^\\"]*)\\"',g=RegExp(f),h=g.exec(e),i=h[1],j=h[2],k="<[^>]*"+i+'\\=\\"'+j+'"',l=a.objFindFn.matchAgainstPreFiltered(b,c,k,null,d);return l}},find:function(a){var b=this.objInst.strHTML,c=this.objInst;return this.arrPointers=this.objFindFn.findAllCommas(a,b,this.arrPointers,c),this},extract:function(a,b,c){if(b!==""){var d=a+b+" ";c.indexOf(d)!==-1?c=c.substring(c.indexOf(d),c.lastIndexOf(d)+d.length):trace("Note: strPointer: '"+b+"' does not exist")}return c},regexEach:function(a,b,c,d,e){var f=this.objInst,g=this.arrPointers,h=f.objMarkers.objM.strMarkerHandle,i=0,j=g.length,k,l;j&&d!=="all"&&(d==="first"?i=j-1:j=1);var m=function(a){return k=g[a],l=h+k+" ","("+l+b+l+")"},n;if(e)for(;i<j;++i){n=m(i);var o=RegExp(n,"g");if(a.search(o)!==-1)a=a.replace(o,function(){return c(arguments)});else{var p="("+l+"<[^>]*)>",q=RegExp(p,"");a=a.replace(q,"$1 "+e[0]+'="'+e[1]+'">')}}else for(;i<j;++i)n=m(i),a=a.replace(RegExp(n,"g"),function(){return c(arguments)});return a},regexAttr:function(b,c,d,e,f,g){var h=this.objInst;b=a.trim(b),c=a.trim(c);var i=g?[b,c]:null;h.strHTML=this.regexEach(h.strHTML,d,e,f,i)},regexElem:function(b,c,d,e){var f=this.objInst;return b=a.trim(b),b.indexOf("<")!=-1&&(b=this.objInst.renewAndWrapTagPointers(b)),f.strHTML=this.regexEach(f.strHTML,c,d,e,null),this.arrPointers=[f.shared.intLastWrappedPointer-1],this},wrapNew:function(a){return a=""+a,a.indexOf("<")!=-1&&(a=this.objInst.renewAndWrapTagPointers(a)),a},append:function(a){var b=this;return this.regexElem(a,"<[^>]*>[\\w\\W]*)(<\\/[^>]*>",function(c){return c[1]+b.wrapNew(a)+c[2]},"all")},prepend:function(a){var b=this;return this.regexElem(a,"<[^>]*>)([\\w\\W]*<\\/[^>]*>",function(c){return c[1]+b.wrapNew(a)+c[2]},"all")},before:function(a){var b=this;return this.regexElem(a,"[\\w\\W]*",function(c){return b.wrapNew(a)+c[1]},"all")},after:function(a){var b=this;return this.regexElem(a,"[\\w\\W]*",function(c){return c[1]+b.wrapNew(a)},"all")},getOuterHTML:function(){var a=arguments.length>0?arguments[0]:function(a){return a},b=this.objInst,c=b.objMarkers.objM.strMarkerHandle,d=b.strHTML,e=this.arrPointers,f,g,h,i="";for(var j=0,k=e.length;j<k;++j)f=e[j],g=c+f+" ",h=d.substring(d.indexOf(g)+g.length,d.lastIndexOf(g)),h=a(h),i=i+h;return i=i.replace(RegExp(c+"\\d+ ","g"),""),i},html:function(){var a=this,b=arguments.length>0?arguments[0]:null;if(b)return this.regexElem(b,"<[^>]*>)[\\w\\W]*(<\\/[^>]*>",function(c){return c[1]+a.wrapNew(b)+c[2]},"all");var c=this.getOuterHTML(function(a){return a=a.substring(a.indexOf(">")+1,a.lastIndexOf("</"))});return c},outerHtml:function(){var a=this,b=arguments.length>0?arguments[0]:null;if(b)return this.regexElem(b,")(<[^>]*>[\\w\\W]*<\\/[^>]*>|<[^>]*\\/>)(",function(c){return c[1]+a.wrapNew(b)+c[3]},"all");var c=this.getOuterHTML();return c},outerHTML:function(){var a=arguments.length>0?arguments[0]:null;return this.outerHtml(a)},clone:function(){return this.html()},appendSibling:function(){var a=this.objInst,b=this.objInst.objMarkers.objM.strMarkerHandle;return this.regexElem("","[\\w\\W]*",function(c){var d=c[1];return d=a.incrementTagPointers(d,b),c[0]+d},"last")},attr:function(a){var b=arguments.length>1?arguments[1]:null,c=b;if(b)return this.regexAttr(a,b,"<[^>]*"+a+'="?)[^"]*([\\w\\W]*"',function(a){return a[1]+b+a[2]},"all",c),this;var d=this.arrPointers;if(d.length){var e=this.objInst.strHTML,f=d[0],g=this.objInst.objMarkers.objM.strMarkerHandle,h=g+f+" ",i=e.substring(e.indexOf(h)+h.length,e.lastIndexOf(h)),j=RegExp("<[^>]*"+a+'="?([^"]*)"',""),k=j.exec(i);if(k)return k[1]}return null},id:function(a){var b=a;this.regexAttr("id",a,'<[^>]*id="?)[^"]*("[\\w\\W]*',function(a){return a[1]+b+a[2]},"first",!0)},addClass:function(a){this.regexAttr("class",a,'<[^>]*class="?)([^"]*)("[\\w\\W]*',function(b){return b[1]+b[2]+" "+a+b[3]},"all",!0)},remove:function(){return this.regexElem("","[\\w\\W]*",function(a){return""},"all")},empty:function(){return this.regexElem("","<[^>]*>)[\\w\\W]*(<\\/[^>]*>",function(a){return a[1]+a[2]},"all")},removeClass:function(a){return this.regexAttr("class",a,'<[^>]*class="?[^"]*[" ])'+a+'([ "][\\w\\W]*',function(a){return a[1]+a[2]},"all",!0),this},removeAttr:function(a){return this.regexAttr(a,"","<[^>]*)"+a+'="?[^"]*"([\\w\\W]*',function(a){return a[1]+a[2]},"all",!1),this},objParentFn:{getEachParentPointer:function(a,b,c){var d="("+a+"\\d+ )[\\w\\W]*\\1",e=RegExp(d,"g");c=c.substring(0,c.indexOf(a+b+" ")),c=c.replace(e,"");var f=a+"(\\d+) <[^\\/][^>]*>\\s*$",g=RegExp(f),h=g.exec(c);if(!h)return null;var i=h[1];return i},getTraversedParentsPointer:function(a,b,c,d){var e=this.getEachParentPointer(a,b,d);return e?this.getClosestPointer(a,b,c,d,e):null},getClosestPointer:function(a,b,c,d,e){var f=c.indexOf(","+e+",")!=-1;return f?e:this.getTraversedParentsPointer(a,e,c,d)},getSelfPointer:function(a,b,c,d){return this.getClosestPointer(a,b,c,d,b)},getSingleParentPointer:function(a,b,c){return this.getEachParentPointer(a,b,c)}},parents:function(){var a=arguments.length,b=a>0?arguments[0]:null,c=a>1?!0:!1,d=null,e=this.objInst,f=e.strHTML;if(b){var g=this.objFindFn.findAllCommas(b,f,[],e);d=","+g.join(",")+","}var h=this.objInst.objMarkers.objM.strMarkerHandle;f=f+"<allowtop></allowtop>";var i=[],j=this.arrPointers,k=this.objParentFn;for(var l=0,m=j.length;l<m;++l){var n=j[l],o=null;a?c?o=k.getSelfPointer(h,n,d,f):o=k.getTraversedParentsPointer(h,n,d,f):o=k.getSingleParentPointer(h,n,f),o&&i.push(o)}return this.arrPointers=i,this},parent:function(){return this.parents()},closest:function(a){return this.parents(a,!0)},top:function(){var a=this.objInst,b=a.objMarkers.objM.strMarkerHandle,c=RegExp("^\\s*"+b+"(\\d+) "),d=c.exec(a.strHTML);return d&&(this.arrPointers=[d[1]]),this},changeEachPointer:function(a,b,c,d){var e=a.strHTML,f=this.arrPointers,g=[],h,i,j;for(var k=0,l=f.length;k<l;++k)h=c+(b+f[k]+" ")+d,i=RegExp(h),j=i.exec(e),j&&g.push(j[2]);this.arrPointers=g},prev:function(){var a=this.objInst,b=a.objMarkers.objM.strMarkerHandle;return this.changeEachPointer(a,b,"<(\\/[^>]*|[^\\/][^>]*\\/)>"+b+"(\\d+) [^<]*",""),this},next:function(){var a=this.objInst,b=a.objMarkers.objM.strMarkerHandle;return this.changeEachPointer(a,b,"<(\\/[^>]*|[^\\/][^>]*\\/)>","[^<]*"+b+"(\\d+) "),this},bind:function(a,b){var c=this.arrPointers;for(var e=0,f=c.length;e<f;++e){var g=c[e],h=this.getSelector(g),i=d().shared.data;i.hasOwnProperty(h)||(i[h]={}),i[h].hasOwnProperty(a)||(i[h][a]={},i[h][a].arr=[]),i[h][a].arr.push(b),this.arrPointers=[g],this.attr("on"+a,"STQuery().dataArrayTrigger('"+h+"','"+a+"')")}return this.arrPointers=c,this},selectors:{},getSelector:function(a){return this.selectors[a]},first:function(){var a=this.arrPointers;return a=a.reverse(),this.arrPointers=[a.shift()],this},last:function(){var a=this.arrPointers;return a=a.reverse(),this.arrPointers=[a.pop()],this}},window.STQuery=d})(window)